import{r as i,j as e,H as u}from"./app-Cmn83fc1.js";import{A as h}from"./AuthenticatedLayout-BxXIyt2z.js";import"./ApplicationLogo-BuMZgIA7.js";import"./transition-C6DRMdq7.js";function j({plan:s=null}){const[r,o]=i.useState(180),[l,n]=i.useState(!1),c=async()=>{n(!0);try{(await fetch("/api/plans/generate",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},body:JSON.stringify({available_minutes:r})})).ok&&window.location.reload()}catch(t){console.error("Error generating plan:",t)}finally{n(!1)}},d=async(t,a)=>{try{await fetch(`/api/tasks/${t}`,{method:"PATCH",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},body:JSON.stringify({status:a})}),window.location.reload()}catch(x){console.error("Error updating task:",x)}},m=t=>{switch(t){case"completed":return"bg-green-100 text-green-800";case"in_progress":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}};return e.jsxs(h,{header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"AI Study Plan"}),children:[e.jsx(u,{title:"Study Plan"}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"mx-auto max-w-4xl sm:px-6 lg:px-8",children:[e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg mb-6",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Generate New Study Plan"}),e.jsxs("div",{className:"flex items-end space-x-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Available Study Time (minutes)"}),e.jsx("input",{type:"number",value:r,onChange:t=>o(parseInt(t.target.value)),min:30,max:720,className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[Math.floor(r/60),"h ",r%60,"m"]})]}),e.jsx("button",{onClick:c,disabled:l,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:l?"Generating...":"Generate Plan"})]})]})}),s&&s.tasks.length>0?e.jsxs("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:["Study Plan for ",new Date(s.plan_date).toLocaleDateString()]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Total time: ",Math.floor(s.total_hours),"h ",Math.round(s.total_hours%1*60),"m"]})]}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"space-y-4",children:s.tasks.sort((t,a)=>t.task_order-a.task_order).map((t,a)=>e.jsx("div",{className:"border rounded-lg p-4 hover:shadow-md transition",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 font-semibold",children:a+1}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:t.task_title}),e.jsxs("p",{className:"text-sm text-gray-500",children:[t.topic.subject.name," - ",t.topic.title]})]}),e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${m(t.status)}`,children:t.status.replace("_"," ")})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["⏱️ ",t.planned_minutes," minutes"]}),e.jsxs("div",{className:"space-x-2",children:[t.status==="pending"&&e.jsx("button",{onClick:()=>d(t.id,"in_progress"),className:"text-xs px-3 py-1 bg-yellow-100 text-yellow-800 rounded hover:bg-yellow-200",children:"Start"}),t.status==="in_progress"&&e.jsx("button",{onClick:()=>d(t.id,"completed"),className:"text-xs px-3 py-1 bg-green-100 text-green-800 rounded hover:bg-green-200",children:"Complete"})]})]})]})]})},t.id))})})]}):e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"p-12 text-center text-gray-500",children:[e.jsx("p",{className:"mb-4",children:"No study plan generated yet."}),e.jsx("p",{className:"text-sm",children:'Set your available time above and click "Generate Plan" to create your AI-powered study schedule!'})]})})]})})]})}export{j as default};
